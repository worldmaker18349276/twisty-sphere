<!DOCTYPE html>
<html lang="en">
<head>
  <title>twisty sphere - example 1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <script src="js/three.min.js"></script>

  <script src="js/Geometer.js"></script>
  <script src="js/twistySphere.js"></script>
</head>
<body>
<script>
var display = new Display();
var builder = new TwistyBallBuilder();
var controller = new BasicController({builder, display, R:1.1});

// builder.shape.geometry.computeFlatVertexNormals();
// for ( let face of builder.shape.geometry.faces ) {
//   let {phi, theta} = new THREE.Spherical().setFromVector3(face.normal);
//   face.color = new THREE.Color().setHSL(theta/2/Math.PI, 1, phi/Math.PI);
// }
// builder.shape.material.vertexColors = THREE.FaceColors;

builder.shape.geometry.computeVertexNormals();
for ( let face of builder.shape.geometry.faces ) for ( let a of [0,1,2] ) {
  let {phi, theta} = new THREE.Spherical().setFromVector3(face.vertexNormals[a]);
  face.vertexColors[a] = new THREE.Color().setHSL(theta/2/Math.PI, 1, phi/Math.PI);
}
builder.shape.material.vertexColors = THREE.VertexColors;

// var texture = new THREE.TextureLoader().load("land_ocean_ice_cloud_2048.jpg");
// texture.wrapS = THREE.RepeatWrapping;
// builder.shape.material.map = texture;

var puzzle = builder.make();
builder.slice(puzzle,
  plane( 0, 1, 1,1/2),
  plane( 0, 1,-1,1/2),
  plane( 0,-1, 1,1/2),
  plane( 0,-1,-1,1/2),
  plane( 1, 0, 1,1/2),
  plane( 1, 0,-1,1/2),
  plane(-1, 0, 1,1/2),
  plane(-1, 0,-1,1/2),
  plane( 1, 1, 0,1/2),
  plane( 1,-1, 0,1/2),
  plane(-1, 1, 0,1/2),
  plane(-1,-1, 0,1/2)
);

display.add(puzzle);

</script>

  <div style="position:fixed;bottom:10px;left:10px;">
    <button onclick="controller.explodeHandler(puzzle)"> explode </button>
    <button onclick="controller.selectElementLoopHandler(puzzle)"> select element </button>
    <button onclick="controller.showCutsLoopHandler(puzzle)"> show cuts </button>
    <button onclick="controller.selectCutLoopHandler(puzzle)"> select cut plane </button>
    <button onclick="controller.twistLoopHandler(puzzle);"> twist </button>
  </div>
</body>
</html>
